## 容斥原理

在计数时，必须注意没有重复，没有遗漏。为了使重叠部分不被重复计算，人们研究出一种新的计数方法，这种方法的基本思想是：先不考虑重叠的情况，把包含于某内容中的所有对象的数目先计算出来，然后再把计数时重复计算的数目排斥出去，使得计算结果既无遗漏有无重复，这种计数方法称为容斥原理。 

### **公式** ###

两个集合的容斥公式：A∪B =|A∪B| = |A|+|B| - |A∩B |(∩：重合的部分）

三个集合的容斥公式：|A∪B∪C| = |A|+|B|+|C| - |A∩B| - |B∩C| - |C∩A| + |A∩B∩C|

**推理如下：**

![](http://i.imgur.com/XQue29e.png)

1、等式右边变形为： {[（A+B - A∩B）+C - B∩C] - C∩A }+ A∩B∩C

2、上图中1245构成A，2356构成B，4567构成C

3、等式右边（）里指的是图中的1+2+3+4+5+6这六部分，那么A∪B∪C还缺部分7

4、等式右边【】里+C后，相当于A∪B∪C多加了4+5+6这三部分，减去B∩C后，还多加了部分4

5、等式右边{}里减去C∩A后，A∪B∪C又多减了部分5，则加上A∩B∩C（即5）刚好是A∪B∪C

**原理**

如果被计数的事物有A、B两类，那么，A类B类元素个数总和= 属于A类元素个数+ 属于B类元素个数—既是A类又是B类的元素个数。（A∪B = A+B - A∩B)


如果被计数的事物有A、B、C三类，那么，A类和B类和C类元素个数总和= A类元素个数+ B类元素个数+C类元素个数—既是A类又是B类的元素个数—既是A类又是C类的元素个数—既是B类又是C类的元素个数+既是A类又是B类而且是C类的元素个数。（A∪B∪C = A+B+C - A∩B - B∩C - C∩A + A∩B∩C）